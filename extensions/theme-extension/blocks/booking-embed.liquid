{% comment %}
  SimplyBook - App Embed Block
  
  This embed block loads the booking system's CSS and JavaScript globally,
  allowing merchants to add booking buttons anywhere in their theme using:
  
  <button class="barbershop-booking-btn" data-open-booking-modal>Book Now</button>
  
  Merchants should enable this in their theme editor's "App embeds" panel.
  
  Note: This embed only loads assets. The actual modal HTML comes from app blocks
  to avoid conflicts when both are used together.
{% endcomment %}

{% assign button_color = block.settings.button_color | default: "#111111" %}
{% assign button_text_color = block.settings.button_text_color | default: "#FFFFFF" %}
{% assign button_padding = block.settings.button_padding | default: 10 %}
{% assign button_radius = block.settings.button_radius | default: 4 %}

{% comment %} Theme color customization {% endcomment %}
{% assign primary_color = block.settings.primary_color | default: "#0066cc" %}
{% assign secondary_color = block.settings.secondary_color | default: "#f8f9fa" %}
{% assign text_color = block.settings.text_color | default: "#333333" %}
{% assign border_color = block.settings.border_color | default: "#e1e5e9" %}
{% assign background_color = block.settings.background_color | default: "#ffffff" %}
{% assign modal_background_color = block.settings.modal_background_color | default: "#ffffff" %}
{% assign custom_css = block.settings.custom_css | default: "" %}

<!-- Load CSS -->
<link rel="stylesheet" href="{{ 'bookingButton-v3.css' | asset_url }}">

<!-- Default button styling for trigger buttons -->
<style>
:root {
  --barbershop-primary: {{ primary_color }};
  --barbershop-secondary: {{ secondary_color }};
  --barbershop-text: {{ text_color }};
  --barbershop-border: {{ border_color }};
  --barbershop-background: {{ background_color }};
  --barbershop-modal-background: {{ modal_background_color }};
  --barbershop-button: {{ button_color }};
  --barbershop-button-text: {{ button_text_color }};
}

{% comment %} Default button styling for trigger buttons {% endcomment %}
.barbershop-booking-btn {
  background-color: {{ button_color }};
  color: {{ button_text_color }};
  padding: {{ button_padding }}px {{ button_padding | times: 1.5 }}px;
  border-radius: {{ button_radius }}px;
  border: none;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: opacity 0.2s ease, transform 0.1s ease;
  display: inline-block;
  text-decoration: none;
  text-align: center;
}

.barbershop-booking-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

{% if custom_css != blank %}
{{ custom_css }}
{% endif %}
</style>

<!-- Load JavaScript -->
<script src="{{ 'simplybook-config.js' | asset_url }}" defer></script>
<script src="{{ 'bookingButton.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "SimplyBook Booking Embed",
  "target": "head",
  "settings": [
    {
      "type": "header",
      "content": "Booking Button Default Styling"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Background",
      "default": "#000000",
      "info": "Default background color for booking buttons"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#FFFFFF",
      "info": "Default text color for booking buttons"
    },
    {
      "type": "range",
      "id": "button_padding",
      "label": "Button Padding",
      "min": 5,
      "max": 20,
      "step": 1,
      "default": 10,
      "unit": "px",
      "info": "Default spacing around button text"
    },
    {
      "type": "range",
      "id": "button_radius",
      "label": "Button Corner Rounding",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 4,
      "unit": "px",
      "info": "Default corner rounding for booking buttons"
    },
    {
      "type": "header",
      "content": "Modal Appearance"
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Modal Accent Color",
      "default": "#0066cc",
      "info": "Accent color for modal elements"
    },
    {
      "type": "color",
      "id": "secondary_color",
      "label": "Secondary Color",
      "default": "#f8f9fa",
      "info": "Secondary color for the booking modal"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Modal Text Color",
      "default": "#333333",
      "info": "Main text color throughout the booking modal"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Modal Borders",
      "default": "#e1e5e9",
      "info": "Border color for modal elements and dividers"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Modal Backgrounds",
      "default": "#ffffff",
      "info": "Background color for modal content areas"
    },
    {
      "type": "color",
      "id": "modal_background_color",
      "label": "Modal Window Background",
      "default": "#ffffff",
      "info": "Background color for the entire modal window"
    },
    {
      "type": "header",
      "content": "Custom Styling"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS",
      "info": "Add custom CSS to further customize the booking system appearance",
      "placeholder": "/* Add your custom CSS here */"
    },
  ]
}
{% endschema %}